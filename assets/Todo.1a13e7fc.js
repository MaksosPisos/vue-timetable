import{u as y,a as f,r as p,m as x}from"./index.esm.e6884754.js";import{_ as $,u as A,y as _,o as d,c as r,a as o,z as h,w as u,b as c,A as V,F as v,n as k,B as T,C as w,d as I,D as b,E as M}from"./index.bed4c6b3.js";const E={setup:()=>({v$:y(),toast:A()}),data(){return{time_on:this.selectedItem.time_on,time_off:this.selectedItem.time_off,name:this.selectedItem.name,reason:this.selectedItem.reason}},validations(){return{name:{maxValue:f(255),validateTextFields:this.validateTextFields},reason:{maxValue:f(255),validateTextFields:this.validateTextFields},time_on:{required:p,minLength:x(4),maxValue:f(5),validateTime:this.validateTimeOn,validateIntersectionTime:this.validateIntersectionTime,validateTimeDifference:this.validateTimeDifference},time_off:{required:p,minLength:x(4),maxValue:f(5),validateTime:this.validateTimeOff,validateIntersectionTime:this.validateIntersectionTime,validateTimeDifference:this.validateTimeDifference}}},props:{selectedItem:{required:!0},activeTodoId:{required:!0},selectedIndexItemTodo:{required:!0}},computed:{isAdmin(){return this.$store.getters["auth/isAdmin"]},isIntersection(){return this.$store.getters.getTodoTimingIntersection({time_on:this.time_on,time_off:this.time_off,index:this.selectedIndexItemTodo})}},methods:{delTodoItem(){this.$store.commit("DEL_TODO_ITEM",{id:this.activeTodoId,index:this.selectedIndexItemTodo}),this.toast.success("\u0423\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D\u043E"),this.$emit("closeModal")},validateTimeOn(){return!!this.time_on.match(/^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/)},validateTimeOff(){return!!this.time_off.match(/^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/)},validateTimeDifference(){let s=_(this.time_on),e=_(this.time_off);return s<e},validateTextFields(){return!this.name&&!this.reason?!0:!!(this.name&&this.reason)},validateIntersectionTime(){return!!this.isIntersection},async changeTodoItem(){if(await this.v$.$validate())this.$store.commit("CHANGE_TODO_ITEM",{id:this.activeTodoId,index:this.selectedIndexItemTodo,name:this.name,reason:this.reason,time_off:this.time_off,time_on:this.time_on}),this.toast.success("\u0423\u0441\u043F\u0435\u0448\u043D\u043E \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u043E"),this.$emit("closeModal");else{const e=this.v$.$errors[0].$propertyPath,a=this.v$.$errors[0].$validator;let m="";e==="name"||e==="reason"?m="\u041F\u043E\u043B\u0435 \u0424\u0418\u041E \u0438 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0434\u043E\u043B\u0436\u043D\u044B \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C\u0438 \u0438\u043B\u0438 \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u044B":a==="validateIntersectionTime"?m="\u041F\u0435\u0440\u0435\u0441\u0435\u0447\u0435\u043D\u0438\u0435 \u0432\u0440\u0435\u043C\u0435\u043D\u0438 =(":m="\u041D\u0435\u0432\u0435\u0440\u043D\u043E \u0432\u0432\u0435\u0434\u0435\u043D\u043E \u0432\u0440\u0435\u043C\u044F",this.toast.error(m)}}}},D={class:"fixed top-0 left-0 min-h-screen w-full z-10 transition-all flex items-center justify-center"},B={class:"z-30 bg-base-300 p-4 rounded-md shadow-md transition-all flex flex-col gap-4"},F={class:"flex gap-4 items-center justify-center"},U={class:"transition-all self-center text-gray-200"},L=V(" - "),j={class:"flex flex-col gap-4"},z={class:"transition-all self-center flex items-center gap-8"},N=["disabled"];function q(s,e,a,m,i,n){return d(),r("div",D,[o("div",B,[o("div",F,[o("h1",U,h(a.activeTodoId),1),u(o("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>i.time_on=t),onBlur:e[1]||(e[1]=(...t)=>s.v$.time_on.$touch&&s.v$.time_on.$touch(...t)),class:"input input-bordered input-primary w-[75px] text-slate-200"},null,544),[[c,i.time_on]]),L,u(o("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>i.time_off=t),onBlur:e[3]||(e[3]=(...t)=>s.v$.time_off.$touch&&s.v$.time_off.$touch(...t)),class:"input input-bordered input-primary w-[75px] text-slate-200"},null,544),[[c,i.time_off]])]),o("div",j,[u(o("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>i.name=t),placeholder:"\u0424\u0418\u041E",onBlur:e[5]||(e[5]=(...t)=>s.v$.name.$touch&&s.v$.name.$touch(...t)),class:"input input-bordered input-primary w-full text-slate-200"},null,544),[[c,i.name]]),u(o("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>i.reason=t),placeholder:"\u041E\u041F\u0418\u0421\u0410\u041D\u0418\u0415",onBlur:e[7]||(e[7]=(...t)=>s.v$.reason.$touch&&s.v$.reason.$touch(...t)),class:"input input-bordered input-primary w-full text-slate-200"},null,544),[[c,i.reason]])]),o("div",z,[o("button",{onClick:e[8]||(e[8]=(...t)=>n.changeTodoItem&&n.changeTodoItem(...t)),class:"transition-all btn btn-success"}," \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C "),o("button",{onClick:e[9]||(e[9]=(...t)=>n.delTodoItem&&n.delTodoItem(...t)),disabled:!n.isAdmin,class:"transition-all btn btn-error"}," \u0423\u0434\u0430\u043B\u0438\u0442\u044C ",8,N),o("button",{onClick:e[10]||(e[10]=t=>s.$emit("closeModal")),class:"transition-all btn btn-info"}," \u0417\u0430\u043A\u0440\u044B\u0442\u044C ")])]),o("div",{onClick:e[11]||(e[11]=t=>s.$emit("closeModal")),class:"absolute top-0 left-0 min-h-screen w-full bg-black opacity-50 z-20 transition-all"})])}var S=$(E,[["render",q]]);const G={setup:()=>({v$:y(),toast:A()}),data(){return{time_on:"00:00",time_off:"00:01",name:"",reason:""}},validations(){return{name:{maxValue:f(255),validateTextFields:this.validateTextFields},reason:{maxValue:f(255),validateTextFields:this.validateTextFields},time_on:{required:p,minLength:x(4),maxValue:f(5),validateTime:this.validateTimeOn,validateIntersectionTime:this.validateIntersectionTime,validateTimeDifference:this.validateTimeDifference},time_off:{required:p,minLength:x(4),maxValue:f(5),validateTime:this.validateTimeOff,validateIntersectionTime:this.validateIntersectionTime,validateTimeDifference:this.validateTimeDifference}}},props:{activeTodoId:{required:!0}},computed:{isAdmin(){return this.$store.getters["auth/isAdmin"]},isIntersection(){return this.$store.getters.getTodoTimingIntersection({time_on:this.time_on,time_off:this.time_off})}},methods:{delTodoItem(){this.$store.commit("DEL_TODO_ITEM",{id:this.activeTodoId,index:this.selectedIndexItemTodo}),this.$emit("closeModal")},validateTimeOn(){return!!this.time_on.match(/^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/)},validateTimeOff(){return!!this.time_off.match(/^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/)},validateTimeDifference(){const s=_(this.time_on),e=_(this.time_off);return!(s>=e)},validateTextFields(){return!this.name&&!this.reason?!0:!!(this.name&&this.reason)},validateIntersectionTime(){return!!this.isIntersection},async addTodoItem(){if(await this.v$.$validate())this.$store.commit("ADD_TODO",{id:this.activeTodoId,name:this.name,reason:this.reason,time_off:this.time_off,time_on:this.time_on}),this.$emit("closeModal"),this.toast.success("\u0423\u0441\u043F\u0435\u0448\u043D\u043E \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043E");else{const e=this.v$.$errors[0].$propertyPath,a=this.v$.$errors[0].$validator;let m="";e==="name"||e==="reason"?m="\u041F\u043E\u043B\u0435 \u0424\u0418\u041E \u0438 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0434\u043E\u043B\u0436\u043D\u044B \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C\u0438 \u0438\u043B\u0438 \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u044B":a==="validateIntersectionTime"?m="\u041F\u0435\u0440\u0435\u0441\u0435\u0447\u0435\u043D\u0438\u0435 \u0432\u0440\u0435\u043C\u0435\u043D\u0438 =(":m="\u041D\u0435\u0432\u0435\u0440\u043D\u043E \u0432\u0432\u0435\u0434\u0435\u043D\u043E \u0432\u0440\u0435\u043C\u044F",this.toast.error(m)}}}},H={class:"fixed top-0 left-0 min-h-screen w-full z-10 transition-all flex items-center justify-center"},P={class:"z-30 bg-base-300 p-4 rounded-md shadow-md transition-all flex flex-col gap-4"},J={class:"flex gap-4 items-center justify-center"},K={class:"transition-all self-center text-gray-200"},Q=V(" - "),R={class:"flex flex-col gap-4"},W={class:"transition-all self-center flex items-center gap-8"};function X(s,e,a,m,i,n){return d(),r("div",H,[o("div",P,[o("div",J,[o("h1",K,h(a.activeTodoId),1),u(o("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>i.time_on=t),onBlur:e[1]||(e[1]=(...t)=>s.v$.time_on.$touch&&s.v$.time_on.$touch(...t)),class:"input input-bordered input-primary w-[75px] text-slate-200"},null,544),[[c,i.time_on]]),Q,u(o("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>i.time_off=t),onBlur:e[3]||(e[3]=(...t)=>s.v$.time_off.$touch&&s.v$.time_off.$touch(...t)),class:"input input-bordered input-primary w-[75px] text-slate-200"},null,544),[[c,i.time_off]])]),o("div",R,[u(o("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>i.name=t),placeholder:"\u0424\u0418\u041E",onBlur:e[5]||(e[5]=(...t)=>s.v$.name.$touch&&s.v$.name.$touch(...t)),class:"input input-bordered input-primary w-full text-slate-200"},null,544),[[c,i.name]]),u(o("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>i.reason=t),placeholder:"\u041E\u041F\u0418\u0421\u0410\u041D\u0418\u0415",onBlur:e[7]||(e[7]=(...t)=>s.v$.reason.$touch&&s.v$.reason.$touch(...t)),class:"input input-bordered input-primary w-full text-slate-200"},null,544),[[c,i.reason]])]),o("div",W,[o("button",{onClick:e[8]||(e[8]=(...t)=>n.addTodoItem&&n.addTodoItem(...t)),class:"transition-all btn btn-success"}," \u0421\u043E\u0437\u0434\u0430\u0442\u044C "),o("button",{onClick:e[9]||(e[9]=t=>s.$emit("closeModal")),class:"transition-all btn btn-info"}," \u0417\u0430\u043A\u0440\u044B\u0442\u044C ")])]),o("div",{onClick:e[10]||(e[10]=t=>s.$emit("closeModal")),class:"absolute top-0 left-0 min-h-screen w-full bg-black opacity-50 z-20 transition-all"})])}var Y=$(G,[["render",X]]);const Z={data(){return{showModal:!1}},props:{timeOn:{required:!0,default:null},name:{default:""},reason:{default:""}}},ee={key:1,class:"fa-solid fa-plus text-3xl"},te={class:"absolute top-2 left-2"};function se(s,e,a,m,i,n){return d(),r("div",{onClick:e[0]||(e[0]=(...t)=>s.showModalEditTodo&&s.showModalEditTodo(...t)),class:k([{"bg-rose-900":a.name&&a.reason,"text-slate-200":a.name&&a.reason},"bg-base-300 w-[300px] flex flex-col items-center justify-center h-28 relative rounded-lg cursor-pointer transition"])},[a.name&&a.reason?(d(),r(v,{key:0},[o("span",null,"\u041A\u043B\u0438\u0435\u043D\u0442: "+h(a.name),1),o("span",null,"\u041F\u0440\u0438\u0447\u0438\u043D\u0430: "+h(a.reason),1)],64)):(d(),r("i",ee)),o("span",te,h(a.timeOn),1)],2)}var oe=$(Z,[["render",se]]);const ie={components:{TodoItem:oe,ModalEditTodo:S,ModalAddTodo:Y},data(){return{textTodoItems:[{text:"\u0422\u043E\u043B\u044C\u043A\u043E \u0434\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0435 \u0441\u043B\u043E\u0442\u044B",id:0},{text:"\u0422\u043E\u043B\u044C\u043A\u043E \u0437\u0430\u043D\u044F\u0442\u044B\u0435 \u0441\u043B\u043E\u0442\u044B",id:1},{text:"\u0412\u0441\u0435 \u0441\u043B\u043E\u0442\u044B",id:2}],sortTodoItemsValue:2,textTodosItems:[{text:"\u0422\u043E\u043B\u044C\u043A\u043E \u043F\u043E\u043B\u043D\u043E\u0441\u0442\u044C\u044E \u0437\u0430\u043D\u044F\u0442\u044B\u0435 \u0434\u043D\u0438",id:0},{text:"\u041F\u043E\u043B\u043D\u043E\u0441\u0442\u044C\u044E \u0441\u0432\u043E\u0431\u043E\u0434\u043D\u044B\u0435 \u0434\u043D\u0438",id:1},{text:"\u0412\u0441\u0435 \u0441\u043B\u043E\u0442\u044B",id:2}],sortTodosItemsValue:2,showModalEdit:!1,showModalAdd:!1,selectedItem:null,activeTodoId:null,selectedIndexItemTodo:null}},computed:{todos(){return this.sortTodosItemsValue===2?this.$store.getters.getTodos:this.$store.getters.getSortTodos(this.sortTodosItemsValue)},todoActive(){return this.sortTodoItemsValue===2?this.$store.getters.getTodoActive:this.$store.getters.getSortTodoActive(this.sortTodoItemsValue)},isAdmin(){return this.$store.getters["auth/isAdmin"]}},methods:{changeTodoActive(s){this.$store.commit("CHANGE_ACTIVE_TODO",s)},showModalEditTodo(s,e,a){this.showModalEdit=!0,this.selectedItem=s,this.activeTodoId=a,this.selectedIndexItemTodo=e},closeModalEdit(){this.showModalEdit=!1},showModalAddTodo(s){this.showModalAdd=!0,this.activeTodoId=s},closeModalAdd(){this.showModalAdd=!1}}},ne={class:"mx-auto mt-8 max-w-5xl"},le={class:"flex flex-col gap-10"},de={class:"flex self-center"},ae={key:0,class:"btn-group"},re=["onClick"],me={key:1},ue={key:0,class:"flex justify-center gap-4"},fe=["value"],ce=["value"],he={key:1,class:"flex flex-wrap gap-4 p-4 justify-center"},ve={key:2,class:"flex flex-col flex-wrap gap-4 p-4 justify-center items-center"},Te=o("p",null," \u041D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E =()",-1),Ie=[Te],pe=o("i",{class:"fa-solid fa-plus text-3xl"},null,-1),xe=[pe];function _e(s,e,a,m,i,n){const t=M("TodoItem"),C=M("ModalEditTodo"),O=M("ModalAddTodo");return d(),r("div",ne,[o("div",le,[o("div",de,[n.todos.length?(d(),r("div",ae,[(d(!0),r(v,null,T(n.todos,l=>(d(),r("button",{key:"todo.id",onClick:g=>n.changeTodoActive(l.id),class:k([{"btn-active":l.active},"btn flex flex-col gap-2"])},[o("span",null,h(l.id),1)],10,re))),128))])):(d(),r("div",me," \u041D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E =( "))]),n.isAdmin?(d(),r("div",ue,[u(o("select",{onChange:e[0]||(e[0]=(...l)=>s.sortTodoItems&&s.sortTodoItems(...l)),"onUpdate:modelValue":e[1]||(e[1]=l=>i.sortTodoItemsValue=l),class:"select select-primary w-full max-w-xs"},[(d(!0),r(v,null,T(i.textTodoItems,l=>(d(),r("option",{value:l.id},h(l.text),9,fe))),256))],544),[[w,i.sortTodoItemsValue]]),u(o("select",{onChange:e[2]||(e[2]=(...l)=>s.sortTodosItems&&s.sortTodosItems(...l)),"onUpdate:modelValue":e[3]||(e[3]=l=>i.sortTodosItemsValue=l),class:"select select-primary w-full max-w-xs"},[(d(!0),r(v,null,T(i.textTodosItems,l=>(d(),r("option",{value:l.id},h(l.text),9,ce))),256))],544),[[w,i.sortTodosItemsValue]])])):I("",!0),n.todos.length&&n.todoActive.items.length?(d(),r("div",he,[(d(!0),r(v,null,T(n.todoActive.items,(l,g)=>(d(),b(t,{key:g,onClick:$e=>n.showModalEditTodo(l,g,n.todoActive.id),"time-on":l.time_on,name:l.name,reason:l.reason},null,8,["onClick","time-on","name","reason"]))),128))])):(d(),r("div",ve,Ie)),n.isAdmin?(d(),r("button",{key:3,onClick:e[4]||(e[4]=l=>n.showModalAddTodo(n.todoActive.id)),class:"btn btn-info self-center"},xe)):I("",!0)]),i.showModalEdit?(d(),b(C,{key:0,onCloseModal:n.closeModalEdit,"selected-item":i.selectedItem,activeTodoId:i.activeTodoId,selectedIndexItemTodo:i.selectedIndexItemTodo},null,8,["onCloseModal","selected-item","activeTodoId","selectedIndexItemTodo"])):I("",!0),i.showModalAdd?(d(),b(O,{key:1,activeTodoId:i.activeTodoId,onCloseModal:n.closeModalAdd},null,8,["activeTodoId","onCloseModal"])):I("",!0)])}var Me=$(ie,[["render",_e]]);export{Me as default};
